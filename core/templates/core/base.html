{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Nomashae | Democratic Micronation{% endblock %}</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%232F2F2F%22/><text x=%2250%22 y=%2250%22 dy=%22.35em%22 text-anchor=%22middle%22 font-family=%22sans-serif%22 font-weight=%22bold%22 font-size=%2270%22 fill=%22white%22>N</text></svg>">
    {% block extra_head %}{% endblock %}
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #2F2F2F;
            --card-bg: #ffffff;
            --border-color: #e9ecef;
            --shadow: 0 4px 6px rgba(0,0,0,0.05);
            --primary: #5B8C5A;
            --secondary: #2F2F2F;
        }
        body.dark-mode {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --card-bg: #1e1e1e;
            --border-color: #333;
            --shadow: 0 4px 6px rgba(0,0,0,0.4);
        }
        body.theme-fire { --primary: #C53D2B; --secondary: #8a2b1f; }
        body.theme-earth { --primary: #5B8C5A; --secondary: #3e613d; }
        body.theme-water { --primary: #2A7A9D; --secondary: #1a4d63; }
        body.theme-air { --primary: #A0A0A0; --secondary: #505050; }
        * { box-sizing: border-box; transition: background-color 0.3s, color 0.3s, border-color 0.3s; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: var(--bg-color); color: var(--text-color); line-height: 1.6; padding-bottom: 60px; }
        nav { background-color: var(--card-bg); border-bottom: 1px solid var(--border-color); padding: 1rem; position: sticky; top: 0; z-index: 1000; display: flex; justify-content: space-between; align-items: center; }
        .nav-brand { font-size: 1.25rem; font-weight: 700; display: flex; align-items: center; gap: 12px; color: var(--primary); }
        .nav-controls { display: flex; gap: 0.8rem; align-items: center; }
        .btn-icon { background: transparent; border: 1px solid var(--border-color); color: var(--text-color); padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; }
        footer { text-align: center; padding: 4rem 1rem; color: var(--text-color); opacity: 0.6; font-size: 0.9rem; }
    </style>
</head>
<body>
    <nav>
        <div class="nav-brand">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6z"/></svg>
            <span>Nomashae</span>
        </div>
        <div class="nav-controls">
            <a href="{% url 'citizenship' %}" class="btn-icon">Citizenship</a>
            <button class="btn-icon" id="theme-toggle">Dark Mode</button>
            <button class="btn-icon" id="lang-switcher">EN</button>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <footer>
        <p id="footer-text">&copy; 2026 Nomashae | Powered by the Elements</p>
    </footer>

    <script>
        function cycleTheme() {
            const themes = ['fire', 'earth', 'water', 'air'];
            let lastIndex = parseInt(localStorage.getItem('themeIndex') || '-1');
            let nextIndex = (lastIndex + 1) % themes.length;
            localStorage.setItem('themeIndex', nextIndex);
            document.body.classList.add('theme-' + themes[nextIndex]);
        }
        cycleTheme();

        const themeToggle = document.getElementById('theme-toggle');
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            if (themeToggle) themeToggle.textContent = 'Light Mode';
        }
        if (themeToggle) {
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
                themeToggle.textContent = isDark ? 'Light Mode' : 'Dark Mode';
            });
        }
    </script>

    {% block extra_scripts %}{% endblock %}
</body>
</html>
